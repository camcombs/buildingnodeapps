{"ts":1370301599208,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"// sample code example2_7\nvar express = require('express');\nvar http = require('http');\nvar app = express();\nvar server = http.createServer(app);\nvar io = require('socket.io').listen(server);\nvar catchPhrases = ['Why I oughta...',\n  'Nyuk Nyuk Nyuk!', 'Poifect!', 'Spread out!',\n  'Say a few syllables!', 'Soitenly!'];\n\napp.set('view engine', 'jade');\napp.set('view options', { layout: true });\napp.set('views', __dirname + '/views');\n\napp.get('/stooges/chat', function(req, res, next) {\n  res.render('chat');\n});\n\nio.sockets.on('connection', function(socket) {\n  var sendChat = function( title, text ) {\n    socket.emit('chat', {\n      title: title,\n      contents: text\n    });\n  };\n  setInterval(function() {\n    var randomIndex = Math.floor(Math.random()*catchPhrases.length)\n    sendChat('Stooge', catchPhrases[randomIndex]);\n  }, 5000);\n  sendChat('Welcome to Stooge Chat', 'The Stooges are on the line');\n  socket.on('chat', function(data){\n    sendChat('You', data.text);\n  });\n});\n\napp.get('/?', function(req, res){\n  res.render('index');\n});\n\nvar port = 8080;\nserver.listen(port);\nconsole.log('Listening on port ' + port);\n"]],"start1":0,"start2":0,"length1":0,"length2":1133}]],"length":1133}
